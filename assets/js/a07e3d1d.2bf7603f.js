"use strict";(self.webpackChunkkahunakv_docs=self.webpackChunkkahunakv_docs||[]).push([[2386],{1007:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>x,frontMatter:()=>c,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"distributed-locks","title":"Distributed Locks","description":"A distributed lock is a mechanism that ensures that a specific resource is accessed by only one node or process at a time in a distributed environment. This is crucial when:","source":"@site/docs/distributed-locks.md","sourceDirName":".","slug":"/distributed-locks","permalink":"/docs/distributed-locks","draft":false,"unlisted":false,"editUrl":"https://github.com/kahunakv/kahunakv.github.io/tree/main/docs/distributed-locks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/getting-started"},"next":{"title":"Leases","permalink":"/docs/distributed-locks/leases"}}');var i=s(4848),a=s(8453),t=s(5537),l=s(9329);const c={},o="Distributed Locks",d={},u=[{value:"Use Cases",id:"use-cases",level:2},{value:"API",id:"api",level:2},{value:"Lock",id:"lock",level:4},{value:"Unlock",id:"unlock",level:4},{value:"Extend",id:"extend",level:4},{value:"Get",id:"get",level:4}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"distributed-locks",children:"Distributed Locks"})}),"\n","\n",(0,i.jsx)(n.p,{children:"A distributed lock is a mechanism that ensures that a specific resource is accessed by only one node or process at a time in a distributed environment. This is crucial when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Preventing race conditions:"})," Ensuring that multiple processes do not modify shared resources simultaneously."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Coordinating tasks:"})," Managing access to shared databases, files, or services across different nodes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Maintaining data durability:"})," Guaranteeing that concurrent operations do not result in inconsistent states."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By partitioning locks among nodes controlled by Raft Groups, Kahuna offers:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reliability:"})," Raft consensus ensures that partition data remains consistent even in the face of network failures."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Simplicity:"})," A straightforward API based on leases makes it easy to integrate distributed locking into your applications."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Leader Election"}),': Elect a single leader in a cluster of services. Only one node should act as the leader at any time (e.g., for scheduling, replication). A distributed lock ensures only one process "wins" and holds the leadership.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Preventing Double Execution of Scheduled Jobs"}),": Ensure a cron job or background worker is executed only once across multiple nodes. In a horizontally scaled system, multiple nodes might try to run the same job. A distributed lock prevents multiple executions of the same scheduled task."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Safe Deployment CI/CD Coordination"}),": Prevent multiple CI/CD pipelines from deploying the same environment simultaneously. Two deployment jobs could conflict and cause downtime. Use a lock to serialize deployments."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database Migration Coordination"}),": Ensure that only one service performs schema migration at startup. If multiple services run migrate up concurrently, it may corrupt the schema. Use a lock to ensure only the first instance runs migrations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Session Control / Login Exclusivity"}),": Allow only one active session per user. Used in banking apps, gaming, admin consoles, etc."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Distributed Queue Consumer Coordination"}),": Ensure that a message from a queue is only processed once, even with multiple consumers."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Throttling or Rate-Limiting Across Services"}),": Enforce a global rate limit across many service instances."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"External System Coordination"}),": Ensure only one node writes to an external system (e.g., shared database, billing API, payment gateway) to avoid double charges or inconsistent writes."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,i.jsx)(n.p,{children:"Kahuna exposes a simple API for acquiring, releasing and extending locks. The main functions are:"}),"\n",(0,i.jsx)(n.h4,{id:"lock",children:"Lock"}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(l.A,{value:"API",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"(bool Locked, long FencingToken) TryLock(string resource, string owner, int expiresMs, Durability durability);\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"resource:"})," The identifier for the resource you want to lock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"owner:"})," A unique identifier for the lock, usually associated with the client or process requesting the lock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"expiresMs:"})," The expiration time for the lock in milliseconds."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"durability:"})," Defines whether the lock durability is ",(0,i.jsx)(n.strong,{children:"Ephemeral"})," or ",(0,i.jsx)(n.strong,{children:"Persistent"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns:"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Locked:"})," ",(0,i.jsx)(n.code,{children:"true"})," if the lock was successfully acquired."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FencingToken:"})," A global counter indicating the number of times the lock has been acquired."]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"CLI",children:[(0,i.jsxs)(n.p,{children:["Acquire a lease on the resource ",(0,i.jsx)(n.code,{children:"locks/tasks/123"})," for 10 seconds in the interactive shell:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-visual-basic",children:"kahuna-cli> lock locks/tasks/123 10000               \nf1 acquired 786f947d8a6643f0b939865f72aa512a\n"})}),(0,i.jsx)(n.p,{children:"Acquire a lease using command line arguments:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"~> kahuna-cli --lock locks/tasks/123 --expires 10000\nf4 acquired 4e3c5d8ee76a4a1db268c81b048a002a\n"})})]}),(0,i.jsxs)(l.A,{value:"C#",children:[(0,i.jsx)(n.p,{children:"Below is a basic example to demonstrate how to acquire a distributed lock in a C# project:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'await using KahunaLock myLock = await client.GetOrCreateLock(\n    "balance-" + userId, \n    TimeSpan.FromSeconds(5)\n);\n\nif (myLock.IsAcquired)\n{\n    Console.WriteLine("Lock acquired!");\n\n    // implement exclusive logic here\n}\n'})})]}),(0,i.jsxs)(l.A,{value:"Rest",children:[(0,i.jsx)(n.p,{children:"Acquiring a lock from the Rest API:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --location \'https://kahuna-dev.company.internal/v1/locks/try-lock\' \\\n    --header \'Content-Type: application/json\' \\\n    --data \'{"resource":"locks/tasks/123", "owner":"e5943062358144b4b0bbff8868f7063d", "expiresMs":10000, "durability":0 }\'\n'})}),(0,i.jsx)(n.p,{children:"Response:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"type": 0, "fencingToken": 0}\n'})})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"unlock",children:"Unlock"}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(l.A,{value:"API",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"(bool Unlocked) Unlock(string resource, string owner, Durability durability);\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"resource:"})," The identifier for the resource to unlock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"owner:"})," The unique identifier for the lock previously used to acquire the lock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"durability:"})," Defines whether the lock durability is ",(0,i.jsx)(n.strong,{children:"Ephemeral"})," or ",(0,i.jsx)(n.strong,{children:"Persistent"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns:"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unlocked:"})," ",(0,i.jsx)(n.code,{children:"false"})," if the resource was successfully unlocked."]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"CLI",children:[(0,i.jsxs)(n.p,{children:["Unlock the acquired lease on the resource ",(0,i.jsx)(n.code,{children:"locks/tasks/123"})," in the interactive shell:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-visual-basic",children:"kahuna-cli> lock locks/tasks/123 10000\nf1 acquired 786f947d8a6643f0b939865f72aa512a\n\nkahuna-cli> unlock locks/tasks/123\nf1 unlocked\n"})}),(0,i.jsx)(n.p,{children:"Unlock the acquired lease using command line arguments:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ kahuna-cli --lock locks/tasks/123 --expires 60000\nf4 acquired 4e3c5d8ee76a4a1db268c81b048a002a\n\n$ kahuna-cli --unlock-lock locks/tasks/123 --owner 4e3c5d8ee76a4a1db268c81b048a002a\nf4 unlocked\n"})})]}),(0,i.jsxs)(l.A,{value:"C#",children:[(0,i.jsx)(n.p,{children:"Below is a basic example to demonstrate how to acquire a distributed lock in a C# project."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'KahunaLock myLock = await client.GetOrCreateLock(\n    "balance-" + userId, \n    TimeSpan.FromSeconds(5)\n);\n\nif (myLock.IsAcquired)\n{\n    Console.WriteLine("Lock acquired!");\n\n    // implement exclusive logic here\n}\n\n// Manually release the lock\nawait myLock.DisposeAsync();\n'})})]}),(0,i.jsxs)(l.A,{value:"Rest",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --location \'http://kahuna-dev.company.internal/v1/locks/try-unlock\' \\\n    --header \'Content-Type: application/json\' \\\n    --data \'{"resource":"locks/tasks/123", "owner":"e5943062358144b4b0bbff8868f7063d", "durability":0}\'\n'})}),(0,i.jsx)(n.p,{children:"Response:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{"type": 0, "fencingToken": 0}\n'})})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"extend",children:"Extend"}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(l.A,{value:"API",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"(bool Extended, long FencingToken) Extend(string resource, string owner, int expiresMs, Durability durability);\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"resource:"})," The identifier for the resource you want to extend."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"owner:"})," A unique identifier for the lock, usually associated with the client or process requesting the lock. It must be the current owner of the lock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"expiresMs:"})," The expiration time for the lock in milliseconds."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"durability:"})," Defines whether the lock durability is ",(0,i.jsx)(n.strong,{children:"Ephemeral"})," or ",(0,i.jsx)(n.strong,{children:"Persistent"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns:"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Extended:"})," ",(0,i.jsx)(n.code,{children:"true"})," if the lock was successfully extended."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FencingToken:"})," A global counter indicating the number of times the lock has been acquired."]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"CLI",children:[(0,i.jsxs)(n.p,{children:["Extends the acquired lease on the resource ",(0,i.jsx)(n.code,{children:"locks/tasks/123"})," in the interactive shell:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-visual-basic",children:"kahuna-cli> lock locks/tasks/123 10000\nf1 acquired 449941a969f74f8eb3d81cc70e5ab2ae\n\nkahuna-cli> extend-lock locks/tasks/123 60000\nf1 extended 449941a969f74f8eb3d81cc70e5ab2ae\n"})}),(0,i.jsx)(n.p,{children:"Extend the acquired lease using command line arguments:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ kahuna-cli --lock locks/tasks/123 --expires 60000\nf4 acquired 4e3c5d8ee76a4a1db268c81b048a002a\n\n$ kahuna-cli --extend-lock locks/tasks/123 --owner 4e3c5d8ee76a4a1db268c81b048a002a --expires 60000 \nf4 extended \n"})})]}),(0,i.jsxs)(l.A,{value:"C#",children:[(0,i.jsx)(n.p,{children:"How to acquire a distributed lock and then extend it in a c# project:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'await using KahunaLock myLock = await client.GetOrCreateLock(\n    "balance-" + userId, \n    TimeSpan.FromSeconds(5)\n);\n\nif (myLock.IsAcquired)\n{\n    Console.WriteLine("Lock acquired!");\n\n    // implement exclusive logic here\n\n    // Extend the lock\n    await myLock.TryExtend(TimeSpan.FromSeconds(60));\n}\n\n'})})]}),(0,i.jsxs)(l.A,{value:"Rest",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl --location \'http://kahuna-dev.company.internal/v1/locks/try-extend\' \\\n    --header \'Content-Type: application/json\' \\\n    --data \'{"resource": "locks/tasks/123", "owner": "e5943062358144b4b0bbff8868f7063d", "expiresMs": 60000, "durability": 0}\'\n'})}),(0,i.jsx)(n.p,{children:"Response:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"type": 0, "fencingToken": 0}\n'})})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"get",children:"Get"}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(l.A,{value:"API",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"(string Owner, long FencingToken) Get(string resource, Durability durability);\n"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"resource:"})," The identifier for the resource you want to get information."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"durability:"})," Defines whether the lock durability is ",(0,i.jsx)(n.strong,{children:"Ephemeral"})," or ",(0,i.jsx)(n.strong,{children:"Persistent"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns:"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Owner:"})," The current owner of the lock."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FencingToken:"})," A global counter indicating the number of times the lock has been acquired."]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"CLI",children:[(0,i.jsxs)(n.p,{children:["Obtains information about the lock ",(0,i.jsx)(n.code,{children:"locks/tasks/123"})," in the interactive shell:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-visual-basic",children:"kahuna-cli> lock locks/tasks/123 10000\nf1 acquired 449941a969f74f8eb3d81cc70e5ab2ae\n\nkahuna-cli> get-lock locks/tasks/123\nf9 fa020530242546798d7c349437665071\n"})}),(0,i.jsx)(n.p,{children:"Obtain information about the lock using command line arguments:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ kahuna-cli --lock locks/tasks/123 --expires 60000\nf4 acquired 4e3c5d8ee76a4a1db268c81b048a002a\n\n$ kahuna-cli --get-lock locks/tasks/123\nf4 4e3c5d8ee76a4a1db268c81b048a002a\n"})})]}),(0,i.jsxs)(l.A,{value:"C#",children:[(0,i.jsx)(n.p,{children:"Obtain information about a lock in a c# project:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'await using KahunaLock myLock = await client.GetOrCreateLock(\n    "group-leader-" + groupId,\n    expiry: TimeSpan.FromSeconds(5)\n);\n\nif (!myLock.IsAcquired)\n{\n    Console.WriteLine("Lock not acquired!");\n\n    var lockInfo = await myLock.GetInfo();\n\n    Console.WriteLine($"Lock owner: {lockInfo.Owner}");\n    Console.WriteLine($"Expires: {lockInfo.Expires}");\n}\n\n'})})]}),(0,i.jsxs)(l.A,{value:"Rest",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl --location 'https://kahuna-dev.company.internal/v1/locks/get-info' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\"resource\": \"locks/tasks/123\", \"durability\": 0}'\n"})}),(0,i.jsx)(n.p,{children:"Response:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"type": 0, "owner": "4e3c5d8ee76a4a1db268c81b048a002a", "fencingToken": 4}\n'})})]})]})]})}function x(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},5537:(e,n,s)=>{s.d(n,{A:()=>v});var r=s(6540),i=s(4164),a=s(5627),t=s(6347),l=s(372),c=s(604),o=s(1861),d=s(8749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:s,attributes:r,default:i}}=e;return{value:n,label:s,attributes:r,default:i}}))}(s);return function(e){const n=(0,o.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function x(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:s}=e;const i=(0,t.W6)(),a=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,c.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(i.location.search);n.set(a,e),i.replace({...i.location,search:n.toString()})}),[a,i])]}function j(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,a=h(e),[t,c]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!x({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=s.find((e=>e.default))??s[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[o,u]=p({queryString:s,groupId:i}),[j,k]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,a]=(0,d.Dv)(s);return[i,(0,r.useCallback)((e=>{s&&a.set(e)}),[s,a])]}({groupId:i}),g=(()=>{const e=o??j;return x({value:e,tabValues:a})?e:null})();(0,l.A)((()=>{g&&c(g)}),[g]);return{selectedValue:t,selectValue:(0,r.useCallback)((e=>{if(!x({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),k(e)}),[u,k,a]),tabValues:a}}var k=s(9136);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=s(4848);function b(e){let{className:n,block:s,selectedValue:r,selectValue:t,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,a.a_)(),d=e=>{const n=e.currentTarget,s=c.indexOf(n),i=l[s].value;i!==r&&(o(n),t(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=c.indexOf(e.currentTarget)+1;n=c[s]??c[0];break}case"ArrowLeft":{const s=c.indexOf(e.currentTarget)-1;n=c[s]??c[c.length-1];break}}n?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":s},n),children:l.map((e=>{let{value:n,label:s,attributes:a}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...a,className:(0,i.A)("tabs__item",g.tabItem,a?.className,{"tabs__item--active":r===n}),children:s??n},n)}))})}function f(e){let{lazy:n,children:s,selectedValue:a}=e;const t=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=t.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function y(e){const n=j(e);return(0,m.jsxs)("div",{className:(0,i.A)("tabs-container",g.tabList),children:[(0,m.jsx)(b,{...n,...e}),(0,m.jsx)(f,{...n,...e})]})}function v(e){const n=(0,k.A)();return(0,m.jsx)(y,{...e,children:u(e.children)},String(n))}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const i={},a=r.createContext(i);function t(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(a.Provider,{value:n},e.children)}},9329:(e,n,s)=>{s.d(n,{A:()=>t});s(6540);var r=s(4164);const i={tabItem:"tabItem_Ymn6"};var a=s(4848);function t(e){let{children:n,hidden:s,className:t}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,t),hidden:s,children:n})}}}]);